---
date created: 2022-04-08 10:36
---

KVM 使用全虚拟化，包括 × 86 个硬件虚拟化扩展。 Docker 是在用户空间中隔离提供的解决方案，而不是创建虚拟机。

## 什么是管理程序？

管理程序是支持虚拟机和硬件资源之间通信的技术逻辑组件。 在服务器虚拟化中，我们说的是“管理程序类型”。

### **1. 类型 1 管理程序**

这个管理程序主要通过 VMWare ESX 和 XEN 产品而闻名。 使用 1 类管理程序，不需要成熟的操作系统。 虚拟机需要知道 ESX 或 XEN 驱动程序才能保证运行。 1 类管理程序通常也称为“裸机”管理程序。

### **2.Type 2管理程序**

类型 2 管理程序需要安装操作系统，例如 Ubuntu、Debian 或其他 Linux 发行版。 在 Unix/Linux 环境下，仅使用 KVM（基于内核的虚拟机）产品。 还有其他产品，比如 Linux-VServer 或者 LXC，但必须注意与 KVM 的区别，因为 LXC 只提供虚拟环境，没有虚拟机。
![[Pasted image 20220408103139.png]]

## KVM 虚拟化（完全虚拟化）vs. 容器虚拟化

在我们刚刚提供的一般解释之后，我们现在将转向我们博客文章的实际主题。

### 什么是容器？

[容器](https://www.nine.ch/en/solutions/container-technology) 代表描述软件或应用程序的单独环境 该容器基于包含已安装和配置的软件的映像。 但是，此映像中缺少内核和驱动程序，因为这些组件是由主机内核提供的。 这些映像保持相对精简，因为它们仅包含必要的二进制文件、库、配置和应用程序数据。 术语 _应用程序虚拟化_ 也与容器虚拟化相关联。

得益于明确定义的容器软件层，将映像从开发系统移植到生产系统在多个方面都更加简单，与 VM 相比，相关的依赖关系更少。 在 OpenShift、Kubernetes 或 Docker-Swarm 等容器管理解决方案中，客户负责创建容器映像和相应的应用程序环境，并启动容器创建过程。 这样，客户可以使用先前构建的图像创建所需的应用程序环境和基础设施。

### 两种环境之间的架构差异

在下图中，您可以看到两种技术之间的差异。
![[Pasted image 20220408103222.png]]

### 不同技术的应用领域

| 虚拟机         | 容器            |
| ----------- | ------------- |
| 需要专用资源的系统   | 经常需要扩展的应用程序环境 |
| 需要自己运行内核的系统 | 本地应用程序开发      |
|             | 微服务架构         |

### 虚拟化技术的优缺点

#### 虚拟机

| 优点             | 缺点                       |
| -------------- | ------------------------ |
| 系统资源隔离带来更高的安全性 | 整个虚拟实体的管理                |
| 明确资源分配         | 即使正在使用自动化工具，新实体的设置时间也会更长 |
|                | 更高的运营成本（虚拟机、系统管理和应用程序开发） |

#### 容器

| 优点                        | 缺点                                        |
| ------------------------- | ----------------------------------------- |
| 更快的环境可扩展性                 | 容器隔离与VM隔离不在一个级别                           |
| 快速创建和分发应用程序               | 复杂性增加                                     |
| 存储要求低（image）              | 持久化数据和日志的处理需要深思熟虑（为了数据安全，需要一个容器有读写权限的存储池） |
| 用于测试或生产的开发机器（桌面和服务器）的可移植性 |                                           |
| 降低运营成本（容器采购和容器映像开发）       |                                           |

## 结论

选择最合适的虚拟化解决方案取决于安全性、准备时间和资源。

对于必须满足高安全标准的应用程序或系统，我们建议使用 VM，因为额外虚拟化层的存在可以提高安全性。

另一方面，将应用程序从开发环境移植到生产环境，可以通过容器解决方案更快、更便宜地实现。 此虚拟化选项也适用于必须快速且可扩展地部署且因此不能依赖于其他系统资源的应用程序。 因此无需提供虚拟机和配置。

从技术角度来看，容器和 VM 解决方案的混合是最佳设置，尽管这比纯容器版本（设置、监控和生命周期管理）更昂贵和复杂。 最终应用程序和环境的复制在混合环境中最为稳定和安全。 数据库和特别敏感的应用程序或系统应在专用系统或虚拟机上运行。

